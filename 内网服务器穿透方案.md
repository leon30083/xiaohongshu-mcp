# åŸºäºLinux ARM64æœåŠ¡å™¨çš„å†…ç½‘ç©¿é€æ–¹æ¡ˆ

## ğŸ—ï¸ ç½‘ç»œæ¶æ„

```
Internet
    â†“
ä¸»è·¯ç”±å™¨ (å…¬ç½‘IP + ç«¯å£æ˜ å°„)
    â†“
å­è·¯ç”±å™¨ (192.168.x.x)
    â”œâ”€â”€ Windows PC (æœ¬æœº) - xiaohongshu-mcp:8080
    â”œâ”€â”€ Linux ARM64 æœåŠ¡å™¨ (ä»£ç†æœåŠ¡å™¨)
    â””â”€â”€ å…¶ä»–è®¾å¤‡
```

## ğŸ¯ æ–¹æ¡ˆ1ï¼šNginxåå‘ä»£ç†ï¼ˆæ¨èï¼‰

### ä¼˜åŠ¿
- âœ… é«˜ç¨³å®šæ€§ï¼Œå®Œå…¨å†…ç½‘æ§åˆ¶
- âœ… æ”¯æŒè´Ÿè½½å‡è¡¡å’Œå¥åº·æ£€æŸ¥
- âœ… å¯é…ç½®SSLè¯ä¹¦
- âœ… è¯¦ç»†çš„è®¿é—®æ—¥å¿—
- âœ… æ”¯æŒå¤šæœåŠ¡ä»£ç†

### LinuxæœåŠ¡å™¨é…ç½®

#### 1. å®‰è£…Nginx
```bash
# Ubuntu/Debian
sudo apt update
sudo apt install nginx

# CentOS/RHEL
sudo yum install nginx
# æˆ–
sudo dnf install nginx
```

#### 2. é…ç½®Nginxåå‘ä»£ç†
```bash
sudo nano /etc/nginx/sites-available/xiaohongshu-mcp
```

```nginx
server {
    listen 8080;
    server_name _;
    
    # å¥åº·æ£€æŸ¥ç«¯ç‚¹
    location /health {
        access_log off;
        return 200 "healthy\n";
        add_header Content-Type text/plain;
    }
    
    # MCPä»£ç†
    location /mcp {
        proxy_pass http://WINDOWS_PC_IP:8080;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        
        # WebSocketæ”¯æŒ
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        
        # è¶…æ—¶è®¾ç½®
        proxy_connect_timeout 60s;
        proxy_send_timeout 60s;
        proxy_read_timeout 60s;
    }
    
    # æ ¹è·¯å¾„é‡å®šå‘
    location / {
        proxy_pass http://WINDOWS_PC_IP:8080;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
```

#### 3. å¯ç”¨é…ç½®
```bash
# åˆ›å»ºè½¯é“¾æ¥
sudo ln -s /etc/nginx/sites-available/xiaohongshu-mcp /etc/nginx/sites-enabled/

# æµ‹è¯•é…ç½®
sudo nginx -t

# é‡å¯Nginx
sudo systemctl restart nginx
sudo systemctl enable nginx
```

### è·¯ç”±å™¨é…ç½®

#### ä¸»è·¯ç”±å™¨ç«¯å£æ˜ å°„
```
å¤–ç½‘ç«¯å£: 18080
å†…ç½‘IP: LinuxæœåŠ¡å™¨IP
å†…ç½‘ç«¯å£: 8080
åè®®: TCP
```

### Windows PCé…ç½®

ç¡®ä¿MCPä»£ç†æœåŠ¡å™¨æ­£å¸¸è¿è¡Œï¼š
```powershell
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
netstat -an | findstr :8080

# å¯åŠ¨æœåŠ¡
node mcp-proxy-server.js
```

## ğŸ¯ æ–¹æ¡ˆ2ï¼šSSHéš§é“

### ä¼˜åŠ¿
- âœ… åŠ å¯†ä¼ è¾“ï¼Œå®‰å…¨æ€§é«˜
- âœ… æ— éœ€é¢å¤–è½¯ä»¶
- âœ… é…ç½®ç®€å•

### LinuxæœåŠ¡å™¨é…ç½®

#### 1. ç¡®ä¿SSHæœåŠ¡è¿è¡Œ
```bash
sudo systemctl status ssh
sudo systemctl enable ssh
```

#### 2. é…ç½®SSH
```bash
sudo nano /etc/ssh/sshd_config
```

æ·»åŠ æˆ–ä¿®æ”¹ï¼š
```
GatewayPorts yes
AllowTcpForwarding yes
```

é‡å¯SSHæœåŠ¡ï¼š
```bash
sudo systemctl restart ssh
```

### Windows PCé…ç½®

#### 1. å®‰è£…OpenSSHå®¢æˆ·ç«¯
```powershell
# Windows 10/11 é€šå¸¸å·²é¢„è£…
ssh -V
```

#### 2. åˆ›å»ºSSHéš§é“
```powershell
# åˆ›å»ºåå‘éš§é“
ssh -R 8080:localhost:8080 user@LINUX_SERVER_IP

# æˆ–è€…åˆ›å»ºæŒä¹…åŒ–éš§é“
ssh -R 8080:localhost:8080 -N -f user@LINUX_SERVER_IP
```

#### 3. è‡ªåŠ¨åŒ–è„šæœ¬
```powershell
# ssh-tunnel.ps1
$LinuxServerIP = "192.168.x.x"  # æ›¿æ¢ä¸ºå®é™…IP
$Username = "your_username"     # æ›¿æ¢ä¸ºå®é™…ç”¨æˆ·å

Write-Host "Creating SSH tunnel to $LinuxServerIP..."
ssh -R 8080:localhost:8080 -N -o ServerAliveInterval=60 -o ServerAliveCountMax=3 $Username@$LinuxServerIP
```

## ğŸ¯ æ–¹æ¡ˆ3ï¼šFRPå†…ç½‘ç©¿é€

### ä¼˜åŠ¿
- âœ… ä¸“ä¸šçš„å†…ç½‘ç©¿é€å·¥å…·
- âœ… æ”¯æŒå¤šç§åè®®
- âœ… æœ‰Webç®¡ç†ç•Œé¢

### LinuxæœåŠ¡å™¨é…ç½®ï¼ˆFRPæœåŠ¡ç«¯ï¼‰

#### 1. ä¸‹è½½FRP
```bash
# ä¸‹è½½ARM64ç‰ˆæœ¬
wget https://github.com/fatedier/frp/releases/download/v0.52.3/frp_0.52.3_linux_arm64.tar.gz
tar -xzf frp_0.52.3_linux_arm64.tar.gz
cd frp_0.52.3_linux_arm64
```

#### 2. é…ç½®frps.ini
```ini
[common]
bind_port = 7000
dashboard_port = 7500
dashboard_user = admin
dashboard_pwd = your_password
token = your_secret_token

# å…è®¸çš„ç«¯å£èŒƒå›´
allow_ports = 8080-8090
```

#### 3. å¯åŠ¨FRPæœåŠ¡ç«¯
```bash
./frps -c frps.ini

# æˆ–åˆ›å»ºsystemdæœåŠ¡
sudo cp frps /usr/local/bin/
sudo nano /etc/systemd/system/frps.service
```

systemdæœåŠ¡é…ç½®ï¼š
```ini
[Unit]
Description=FRP Server
After=network.target

[Service]
Type=simple
User=frp
ExecStart=/usr/local/bin/frps -c /etc/frp/frps.ini
Restart=on-failure
RestartSec=5s

[Install]
WantedBy=multi-user.target
```

### Windows PCé…ç½®ï¼ˆFRPå®¢æˆ·ç«¯ï¼‰

#### 1. ä¸‹è½½Windowsç‰ˆFRP
```powershell
# ä¸‹è½½å¹¶è§£å‹åˆ°é¡¹ç›®ç›®å½•
Invoke-WebRequest -Uri "https://github.com/fatedier/frp/releases/download/v0.52.3/frp_0.52.3_windows_amd64.zip" -OutFile "frp.zip"
Expand-Archive -Path "frp.zip" -DestinationPath "."
```

#### 2. é…ç½®frpc.ini
```ini
[common]
server_addr = LINUX_SERVER_IP
server_port = 7000
token = your_secret_token

[xiaohongshu-mcp]
type = tcp
local_ip = 127.0.0.1
local_port = 8080
remote_port = 8080
```

#### 3. å¯åŠ¨FRPå®¢æˆ·ç«¯
```powershell
.\frpc.exe -c frpc.ini
```

## ğŸ“Š æ–¹æ¡ˆå¯¹æ¯”

| æ–¹æ¡ˆ | ç¨³å®šæ€§ | å®‰å…¨æ€§ | é…ç½®éš¾åº¦ | æ€§èƒ½ | æ¨èåº¦ |
|------|--------|--------|----------|------|--------|
| Nginxåå‘ä»£ç† | â­â­â­â­â­ | â­â­â­â­ | â­â­â­ | â­â­â­â­â­ | ğŸ¥‡ |
| SSHéš§é“ | â­â­â­â­ | â­â­â­â­â­ | â­â­â­â­â­ | â­â­â­â­ | ğŸ¥ˆ |
| FRP | â­â­â­â­ | â­â­â­â­ | â­â­â­ | â­â­â­â­ | ğŸ¥‰ |

## ğŸš€ å®æ–½å»ºè®®

### ç¬¬ä¸€æ­¥ï¼šé€‰æ‹©æ–¹æ¡ˆ
æ¨èä»**Nginxåå‘ä»£ç†**å¼€å§‹ï¼Œå› ä¸ºï¼š
- é…ç½®ç›¸å¯¹ç®€å•
- æ€§èƒ½æœ€å¥½
- åŠŸèƒ½æœ€ä¸°å¯Œ
- ä¾¿äºåç»­æ‰©å±•

### ç¬¬äºŒæ­¥ï¼šç½‘ç»œå‡†å¤‡
1. ç¡®è®¤LinuxæœåŠ¡å™¨çš„å†…ç½‘IPåœ°å€
2. ç¡®è®¤Windows PCçš„å†…ç½‘IPåœ°å€
3. æµ‹è¯•ä¸¤å°è®¾å¤‡ä¹‹é—´çš„ç½‘ç»œè¿é€šæ€§

### ç¬¬ä¸‰æ­¥ï¼šé€æ­¥å®æ–½
1. å…ˆåœ¨LinuxæœåŠ¡å™¨ä¸Šé…ç½®ä»£ç†
2. æµ‹è¯•å†…ç½‘è®¿é—®
3. é…ç½®è·¯ç”±å™¨ç«¯å£æ˜ å°„
4. æµ‹è¯•å¤–ç½‘è®¿é—®

### ç¬¬å››æ­¥ï¼šç›‘æ§å’Œç»´æŠ¤
1. è®¾ç½®æ—¥å¿—ç›‘æ§
2. é…ç½®è‡ªåŠ¨é‡å¯
3. å®šæœŸæ£€æŸ¥æœåŠ¡çŠ¶æ€

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜
1. **è¿æ¥è¶…æ—¶**ï¼šæ£€æŸ¥é˜²ç«å¢™è®¾ç½®
2. **ä»£ç†å¤±è´¥**ï¼šç¡®è®¤ç›®æ ‡æœåŠ¡æ­£åœ¨è¿è¡Œ
3. **ç«¯å£å†²çª**ï¼šä½¿ç”¨netstatæ£€æŸ¥ç«¯å£å ç”¨

### è°ƒè¯•å‘½ä»¤
```bash
# æ£€æŸ¥ç«¯å£ç›‘å¬
sudo netstat -tlnp | grep :8080

# æ£€æŸ¥NginxçŠ¶æ€
sudo systemctl status nginx

# æŸ¥çœ‹Nginxæ—¥å¿—
sudo tail -f /var/log/nginx/access.log
sudo tail -f /var/log/nginx/error.log

# æµ‹è¯•ä»£ç†
curl -X POST http://localhost:8080/mcp -H "Content-Type: application/json" -d '{"method":"initialize"}'
```